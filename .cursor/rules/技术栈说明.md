# 技术栈说明

## Framework
- **SMM**: 总体技术栈为 Spring + MyBatis + MySQL
- **Spring Boot**: 通过 WeupServer 包装的 Spring Boot

## Middleware
### DataBase
- **TDSQL**: 基于 MariaDB 的修改版，新项目要求用 8.0
- **TiDB**: 非联机交易的大规模数据存储优选
- **WeRedis**: 微众 Redis 集群
- **Alibaba Druid**: 数据库连接池组件

### ORM
- **MyBatis**: 通过开发平台生成数据库操作的 POJOs、Mapper XML Files and Map interfaces.

### Distributed File System(DFS)
- **FPS**: 微众分布式文件存储系统

### 消息对接以及微服务架构
- **WeMQ**: 基于 Apache RocketMQ 二次开发的微众消息队列，MASA 异步服务的基础。
- **RMB**: RMB（Reliable Message Bus ，可靠消息总线）是基于 WeMQ 的银行层次化、松耦合、分布式 IT 系统架构的基础技术平台、中间件。作为跨DCN、跨系统之间服务的相互调用的平台，提供同步、异步方式的接口调用。
- **MASA**: 全称 Modern Application and Service Architecture，即现代应用和服务体系架构，是 RMB 的技术演进与替换新方案。
- **Q号**: 我们说的Q号，是指RMB的服务ID(serviceId)，唯一标识一个RMB的微服务，又通常称服务号，由8位数字组成，样例：04304396
- **场景号**: 在同一个RMB服务ID，可以通过场景号(scenarioId)区分不同的服务场景,通常由两位数字组成，目前绝大部分的RMB服务默认只有'01'这一个场景号，取值样例：01
- **WeRPC**: 微众 Remote Procedure Call 微服务，MASA 同步服务的基础。

## weup框架：基于Spring技术栈封装的SDK集合
- **weup-base**: 基于 Jackson 组件的 JSON 格式文本序列化与反序列化，操作日志定义，数据掩码，国标数据校验。其中cn.webank.weup.base.util'这个package包含一些常用工具类，比如JSONUtil，WeDateUtils，YAMLUtil等
- **weup-biz**: weup 组件核心业务功能，如 RMB/MASA 的注册和调用，数据库连接池自定义 Filter，基于日志框架（SLF4J + Log4j2）的掩码、脱敏，MyBatis 的增强等。
- **weup-rmb**: RMB/MASA 相关的异常定义，日志记录，协议处理。其中cn.webank.weup.rmb.exceptions这个package包含了场景的RMB相关异常类封装，比如: WeupRmbBizException,WeupRmbCallException等；另外常用的类包括cn.webank.weup.rmb.common中的WeupRmbAppHeader等
- **weup-rmbannotations**: RMB 协议定义用到的自定义注解。
- **weup-validate**: 基于自定义注解的参数校验。其中cn.webank.weup.validate.annotations.strings这个packag包含了常见的字符串RMB参数校验注解，cn.webank.weup.validate.annotations.numbers包含数字相关校验注解
- **weup-adm**: 管理台相关的 UM/PUM 权限控制接入，通用审批/复核流程封装，操作日志记录等。
- **weupserver-libs**: 通过自定义 Gradle 插件 weupserver-plugin 依赖的 Spring Boot 定制，包含进程启停控制核心逻辑。

## 报文体序列化
- **JSON**: RMB/MASA 报文体格式, 使用 weup-base 中的 JSONUtil 进行序列化与反序列化。
- **XML**: 选择开源且免费的模板引擎组件，如 FreeMarker、Velocity、Thymeleaf、JasperReports

## weup框架常用API说明
- JSON序列化工具JSONUtil：JSON字符串转对象使用fromJsonStr方法，对象转JSON序列化可以使用toDenseJsonStr，toFullJsonStr，toFullJsonStrWithException等方法